---
layout: default
permalink: /time-table/
title: タイムテーブル
---
{% include navbar.html %}

{% comment %} 
  Jekyll プラグインで事前計算されたタイムテーブル表を使用
  ロジックはプラグインで計算済み。Liquid は描画のみを担当
{% endcomment %}

{% assign ttg         = site.data.time_table_grid %}
{% assign time_slots  = ttg.time_slots %}
{% assign rooms       = ttg.rooms %}
{% assign room_styles = ttg.room_styles %}
{% assign time_labels = ttg.time_labels %}

<section class="max-w-[1200px] mx-auto px-4 sm:px-8 mt-30 xl:mt-15">
  <h2 class="text-4xl text-center mb-8">
    Time table
    <span class="block mt-3 text-2xl">タイムテーブル</span>
  </h2>

  <div class="ttable-wrap" aria-label="タイムテーブル（横スクロール可）">
    <table class="ttable" style="--room-count: {{ rooms | size }};">
      <caption>
        {{ site.date_event }} のタイムテーブル
      </caption>

      <thead>
        <tr>
          <th scope="col" class="ttable__th ttable__th--start">時間</th>
          {% for room in rooms %}
            {% assign rstyle = room_styles[room] %}
            <th scope="col"
                class="ttable__th ttable__th--room"
                style="--room-color: {{ rstyle.color | default: '#c43b3b' }};">
              <span class="ttable__room-cap">{{ room }}</span>
            </th>
          {% endfor %}
        </tr>
      </thead>

      <tbody>
        {% for time_slot in time_slots %}
          {% assign slot_index = forloop.index0 %}
          {% assign time_label = time_labels[slot_index] %}

          <tr>
            <th scope="row" class="ttable__cell ttable__cell--start">{{ time_label }}</th>

            {% for room_event in time_slot %}
              {% assign room_index = forloop.index0 %}
              {% assign room   = rooms[room_index] %}
              {% assign rstyle = room_styles[room] %}
              
              {% if room_event.event %}
                {% comment %} イベントの開始セル {% endcomment %}
                {% assign event_data = room_event.event %}
                {% assign accent = event_data.accent | default: rstyle.color | default: '#c43b3b' %}
                
                <td class="ttable__cell ttable__cell--event"
                    rowspan="{{ room_event.span }}"
                    style="--span: {{ room_event.span }};">
                  <div class="ttable__event" style="--accent: {{ accent }};">
                    <div class="ttable__event-time">{{ event_data.start }}–{{ event_data.end }}</div>
                    <div class="ttable__event-title">{{ event_data.title }}</div>
                    {% if event_data.subtitle %}
                      <div class="ttable__event-subtitle">{{ event_data.subtitle }}</div>
                    {% endif %}
                    {% if event_data.badge %}
                      <span class="ttable__badge">{{ event_data.badge }}</span>
                    {% endif %}
                    {% if event_data.note %}
                      <div class="ttable__event-note">{{ event_data.note }}</div>
                    {% endif %}
                  </div>
                </td>
              {% elsif room_event.continued %}
                {% comment %} 継続イベント（rowspanでカバーされているので出力は不要） {% endcomment %}
              {% else %}
                {% comment %} 空きイベント {% endcomment %}
                <td class="ttable__cell ttable__cell--empty" aria-label="空き時間"></td>
              {% endif %}
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
